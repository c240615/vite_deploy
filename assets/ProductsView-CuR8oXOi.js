import{i as b,_ as C,m as v,a as f,c,b as t,t as r,F as u,j as h,o as n,w as g,h as I,p as k,k as T}from"./index-ruAEl9v8.js";import{a as x}from"./axios-5KWFXKlW.js";var P={VITE_URL:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"claire_vue3_apipath",VITE_GITHUB:"https://github.com/c240615/vite_deploy",BASE_URL:"/vite_deploy/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:S,VITE_PATH:$}=P,m=b({id:"product",state:()=>({products:[]}),actions:{async getProducts(){const s=`${S}/api/${$}/products/all`,o=await x.get(s);this.products=o.data.products}},getters:{sortProducts:({products:s})=>s.sort((o,a)=>a.price-o.price)}}),y=b({id:"cart",state:()=>({cart:[]}),actions:{addToCart(s,o=1){const a=this.cart.find(i=>i.productId===s);a?a.qty+=o:this.cart.push({id:new Date().getTime(),productId:s,qty:o})},removeCartItem(s){const o=this.cart.findIndex(a=>a.id===s);this.cart.splice(o,1)},setCartQty(s,o){const a=this.cart.find(i=>i.id===s);a.qty=parseInt(o.target.value)}},getters:{cartList:({cart:s})=>{const{products:o}=m(),a=s.map(l=>{const _=o.find(e=>e.id===l.productId);return{...l,product:_,subtotal:_.price*l.qty}}),i=a.reduce((l,_)=>l+_.subtotal,0);return{carts:a,total:i}}}}),w={data(){return{}},methods:{...v(m,["getProducts"]),...v(y,["addToCart","removeCartItem","setCartQty"])},computed:{...f(m,["sortProducts"]),...f(y,["cartList"])},mounted(){this.getProducts()}},p=s=>(k("data-v-9949151f"),s=s(),T(),s),L=p(()=>t("h1",{class:"my-3 text-dark text-center"},[t("b",null,"瑞和水果行")],-1)),E={class:"m-4"},V={key:0,class:"m-4"},U=p(()=>t("div",null,"購物車沒有任何品項",-1)),B=[U],D={key:1,class:"m-4"},R={class:"m-4 position-relative"},A=p(()=>t("p",{class:"text-end"},"購物車",-1)),q={class:"position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger"},H={class:"table align-middle"},N={width:"100"},Q=["onClick"],j={width:"100"},F=["src"],M={class:"text-center",width:"100"},O=["value","onChange"],G=["value"],X={class:"text-end"},z={colspan:"5",class:"text-end"},J={class:"row g-4 m-4"},K={class:"card eachproduct"},W=["src","alt"],Y={class:"card-body"},Z={class:"float-end"},tt={class:"d-flex flex-column justify-content-evenly desbox"},st={class:"card-text"},et={class:"input-group"},ot=["onClick"],at=p(()=>t("div",{class:"banner"},null,-1));function ct(s,o,a,i,l,_){return n(),c(u,null,[L,t("div",E,[s.cartList.carts.length?(n(),c("div",D,[t("div",R,[A,t("span",q,r(s.cartList.carts.length),1)]),t("table",H,[t("tbody",null,[(n(!0),c(u,null,h(s.cartList.carts,e=>(n(),c("tr",{class:"border",key:e.id},[t("td",N,[t("a",{href:"#",class:"text-dark",onClick:g(d=>s.removeCartItem(e.id),["prevent"])},"X",8,Q)]),t("td",j,[t("img",{src:e.product.imageUrl,alt:"",class:"table-img"},null,8,F)]),t("td",M,r(e.product.title),1),t("td",null,[t("select",{class:"form-select",value:e.qty,onChange:d=>s.setCartQty(e.id,d)},[(n(),c(u,null,h(20,d=>t("option",{selected:"",key:d,value:d},r(d),9,G)),64))],40,O)]),t("td",X,"$ "+r(e.subtotal),1)]))),128))]),t("tfoot",null,[t("tr",null,[t("td",z," 總金額 NT$ "+r(s.cartList.total),1)])])])])):(n(),c("div",V,B))]),t("div",J,[(n(!0),c(u,null,h(s.sortProducts,e=>(n(),c("div",{key:e.name,class:"col-md-4"},[t("div",K,[t("img",{src:e.imageUrl,alt:e.title,class:"card-img-top text-center"},null,8,W),t("div",Y,[t("h5",null,[I(r(e.title)+" ",1),t("span",Z,"$ "+r(e.price),1)]),t("div",tt,[t("p",st,r(e.description),1)]),t("div",et,[t("a",{class:"btn btn-outline-primary",type:"button",onClick:g(d=>s.addToCart(e.id),["prevent"])},"加入購物車",8,ot)])])])]))),128))]),at],64)}const dt=C(w,[["render",ct],["__scopeId","data-v-9949151f"]]);export{dt as default};
